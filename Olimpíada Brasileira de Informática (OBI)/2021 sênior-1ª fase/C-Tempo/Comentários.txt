Para resolver o problema, pode-se utilizar uma classe que guarda as informações do tempo de recebimento e tempo de envio, respectivamente inicializados em 0 e -1. Ao decorrer do looping de entradas, deve-se manter controle sobre o tempo passado até o momento com uma variável de tempo atual. O tempo atual é somado em 1 a cada registro, e em X a cada registro T X. Quando se recebe ou se envia uma mensagem, o tempo equivale ao tempo atual. A cada registro de mensagem recebida, adiciona o identificado do amigo em uma estrutura set<int> Keys, que serão as chaves para um map<int, Registros>, que ao fim do problema serão percorridos para imprimir as informações finais.